<template>
<!--    <title>PrivAnt</title>

            <h3>Login</h3>-->

                <form name="loginFormular" id="loginFormular" onsubmit=" daten_pruefen(); return false;" >
                    Name:                  <input name="Namensfeld" id="regNamensfeld" type="text"><br/><br/>
                    Passwort:              <input name="Passwortfeld" id="regPasswort" type="password"><br/><br/>
                    <div id="label"></div>
                    <input type="submit" id="regButton" value="Einloggen">
                </form>


    <script type="text/javascript">
        function daten_pruefen() {
            $(function() {
                var user = [];
                var bool = false, rolle = false;
                $.getJSON('user.json', function (data) {
                    $.each(data.user, function(i,j){
                        if(document.getElementById("regNamensfeld").value == j.username &&
                                document.getElementById("regPasswort").value == j.passwort){
                            bool = true;
                            if(j.rolle == "Admin"){
                                rolle = true;
                            }
                        }
                    });

                    if ((document.getElementById("regNamensfeld").value == localStorage.getItem("localName") &&
                            document.getElementById("regPasswort").value == localStorage.getItem("localPasswort")))
                    {
                        $('#label').html("<p>Die Einlog-Daten sind korrekt</p>");
                        console.log("Korrekt");
                        main.loggedIn();
                    }

                    else if(bool){
                        $('#label').html("<p>Die Einlog-Daten sind korrekt</p>");
                        console.log("Korrekt");
                        main.loggedIn();
                        if(rolle)
                        {
                            $('#label').append("<p>Sie sind als Admin eingeloggt</p>");
                        }
                    }

                    else if((document.getElementById("regNamensfeld")).value == "" && (document.getElementById("regPasswort").value == "")){
                        $('#label').html("<p>Geben Sie bitte Ihren Usernamen und Passwort ein!</p>");
                    }
                    else if((document.getElementById("regNamensfeld")).value == ""){
                        $('#label').html("<p>Geben Sie bitte Ihren Usernamen ein!</p>");
                    }
                    else if((document.getElementById("regPasswort")).value == ""){
                        $('#label').html("<p>Geben Sie bitte Ihr Passwort ein!</p>");
                    }
                    else{
                        $('#label').html("<p>Die Einlog-Daten sind falsch!</p>");
                        console.error("Falsche Eingabedaten");
                    }
                })
        })}
    </script>

   <hr/>


</template>
